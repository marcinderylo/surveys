<?xml version="1.0" encoding="utf-8"?>
<mx:VBox xmlns:mx="http://www.adobe.com/2006/mxml" xmlns:components="org.adaptiveplatform.surveys.components.*"
         height="100%" width="100%"
         verticalScrollPolicy="off" horizontalScrollPolicy="off">
    <mx:Script>
		<![CDATA[
        import org.adaptiveplatform.surveys.dto.generated.StudentGroupDto;
        import org.adaptiveplatform.surveys.view.researchCreator.ResearchCreatorModel;

        [Bindable]
        public var model:ResearchCreatorModel;
        [Bindable]
        public var stepModel:GroupSelectionStepModel;

        public function onGroupToggle(event:Event, data:Object):void {
            var selected:Boolean = event.target.selected;
            var group:StudentGroupDto = data.data as StudentGroupDto;
            data.selected = selected;
            stepModel.selectGroup(group, selected);
        }
        ]]>
	</mx:Script>
    <components:SearchBar searchPhrase="@{stepModel.studentGroupQuery.groupNamePattern}"
                          findClicked="stepModel.findGroups()"
                          resetClicked="stepModel.resetGroups()"/>

    <mx:DataGrid id="groupList"
                 dataProvider="{stepModel.groupsList}"
                 width="100%" height="100%" rowHeight="26"
                 draggableColumns="false" sortableColumns="true" selectable="false">
        <mx:columns>
            <mx:DataGridColumn textAlign="center"
                               width="50"
                               sortable="false">
                <mx:itemRenderer>
                    <mx:Component>
                        <mx:CheckBox change="outerDocument.onGroupToggle(event, data)"
                                     selected="{data.selected}"/>
                    </mx:Component>
                </mx:itemRenderer>
            </mx:DataGridColumn>
            <mx:DataGridColumn headerText="{resourceManager.getString('adaptive', 'groupName')}"
                               dataField="groupName"/>
        </mx:columns>
    </mx:DataGrid>

</mx:VBox>
